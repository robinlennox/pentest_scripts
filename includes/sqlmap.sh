#!/bin/bash

# Install SQLmap
PACKAGE_NAME="SQLmap"
PRINT_MESSAGE "Checking for ${PACKAGE_NAME} updates"
cd "${TOOLSDIRECTORY}"
if [ ! -d ./sqlmap-dev/ ]; then
	PRINT_GOOD "Downloading ${PACKAGE_NAME}"
	git clone https://github.com/sqlmapproject/sqlmap.git ${TOOLSDIRECTORY}/sqlmap-dev
else
	cd ./sqlmap-dev/
	git pull | grep -o "Already up-to-date"
	if [ $? = 0 ] ; then
		PRINT_GOOD "${PACKAGE_NAME} already up-to-date"
	else
		PRINT_GOOD "${PACKAGE_NAME} updated"
	fi
fi

# SQLmap Dependencies
for DEPENDPKG in python-kinterbasdb python-pyodbc python-pymssql python-psycopg2 python-pysqlite2 python-pymssql python-dbg
do
	dpkg -s ${DEPENDPKG} 2>&1 | grep -o Installed-Size
	if [ $? != 0 ] ; then
		PRINT_GOOD "Install ${PACKAGE_NAME} Dependency - ${DEPENDPKG}"
		sudo apt-get -y install ${DEPENDPKG}
	fi
done