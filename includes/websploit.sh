#!/bin/bash

# WebSploit Dependencies
for DEPENDPKG in python-scapy
do
	dpkg -s ${DEPENDPKG} 2>&1 | grep -o Installed-Size
	if [ $? != 0 ] ; then
		PRINT_GOOD "Install WebSploit Dependency - ${DEPENDPKG}"
		sudo apt-get -y install ${DEPENDPKG}
	fi
done

# WebSploit
PRINT_MESSAGE "Checking for WebSploit updates"
cd "${TOOLSDIRECTORY}"
if [ ! -d ./websploit/ ]; then
	PRINT_GOOD "Downloading WebSploit"
	git clone https://github.com/websploit/websploit.git
else
	cd ./websploit/
	git pull | grep -o "Already up-to-date"
	if [ $? = 0 ] ; then
		PRINT_GOOD "WebSploit already up-to-date"
	else
		PRINT_GOOD "WebSploit updated"
	fi
fi