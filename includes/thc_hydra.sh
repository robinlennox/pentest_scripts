#!/bin/bash

# THC Hydra
PACKAGE_NAME="THC Hydra"
PRINT_MESSAGE "Checking for ${PACKAGE_NAME} updates"
# THC Hydra Dependencies
for DEPENDPKG in libssl-dev libssh-dev libidn11-dev libpcre3-dev libgtk2.0-dev libmysqlclient-dev libpq-dev libsvn-dev firebird-dev
do
	dpkg -s ${DEPENDPKG} 2>&1 | grep -o Installed-Size
	if [ $? != 0 ] ; then
		PRINT_GOOD "Install ${PACKAGE_NAME} Dependency - ${DEPENDPKG}"
		sudo apt-get -y install ${DEPENDPKG}
	fi
done
hydra_install()
{
	PRINT_GOOD "Install ${PACKAGE_NAME}"
	cd "${TOOLSDIRECTORY}/hydra/"
	sudo ./configure
	make
	sudo make install clean
}

cd "${TOOLSDIRECTORY}"
if [ ! -d ./hydra/ ]; then
	PRINT_GOOD "Downloading ${PACKAGE_NAME}"
	git clone https://github.com/vanhauser-thc/thc-hydra.git hydra
	hydra_install
else
	cd ./hydra/
	git pull | grep -o "Already up-to-date"
	if [ $? = 0 ] ; then
		PRINT_GOOD "${PACKAGE_NAME} already up-to-date"
	else
		hydra_install
		PRINT_GOOD "${PACKAGE_NAME} updated"
	fi

fi