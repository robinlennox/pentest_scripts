#!/bin/bash

# Import Function
source nice_print.sh

# Script prerequisites
for DEPENDPKG in build-essential curl git make subversion
do
	dpkg -s ${DEPENDPKG} 2>&1 | grep -o Installed-Size
	if [ $? != 0 ] ; then
		PRINT_GOOD "Install Script Dependency - ${DEPENDPKG}"
		sudo apt-get -y install ${DEPENDPKG}
	fi
done

# Update Ubuntu
PRINT_MESSAGE "Checking for Ubuntu updates"

#Don't accept changes to configuration file
echo N | sudo dpkg --configure -a

#Distro Upgrade
sudo apt-get dist-upgrade -y
sudo apt-get autoclean -y
sudo apt-get autoremove -y

sudo apt-get update
UPDATE_INSTALLED=$(sudo apt-get -y --force-yes upgrade | cut -d ' ' -f1-5 | grep -Eo '[1-9]')
if [ -z "$UPDATE_INSTALLED" ] ; then
	PRINT_GOOD "Ubuntu already up-to-date"
else
	PRINT_GOOD "Ubuntu updated"
fi